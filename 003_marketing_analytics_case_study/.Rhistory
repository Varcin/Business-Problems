# Libraries
library(tidyverse)
library(readxl)
library(recipes)
library(tidyquant)
library(ggrepel)
# 1.0 READ EXCEL SHEETS ----
path   <- "data/bank_term_deposit_marketing_analysis.xlsx"
sheets <- excel_sheets(path)
# 2.0 INVESTIGATE DATA FOR EACH SHEET ----
sheets %>%
map(~ read_excel(path  = path, sheet = .)) %>%
set_names(sheets)
sheets %>%
map(~ read_excel(path  = path, sheet = .))
sheets %>%
map(~ read_excel(path  = path, sheet = .))
# 2.0 INVESTIGATE DATA FOR EACH SHEET ----
sheets %>%
map(~ read_excel(path  = path, sheet = .)) %>%
set_names(sheets)
# 3.0 PERFORM VLOOKUP EQUIVALENT ----
data_joined_tbl <- sheets[4:7] %>%
map(~ read_excel(path = path, sheet = .)) %>%
reduce(left_join)
View(data_joined_tbl)
tbl_1 <- data_joined_tbl %>%
select(ID, AGE)
tbl_2 <- data_joined_tbl %>%
select(ID, EDUCATION)
tbl_1
tbl_2
tbl_1 %>%
left_join(tbl_2)
data_joined_tbl %>% glimpse()
# Libraries
library(tidyverse)
library(readxl)
library(recipes)
library(tidyquant)
library(ggrepel)
# 1.0 READ EXCEL SHEETS ----
path   <- "data/bank_term_deposit_marketing_analysis.xlsx"
sheets <- excel_sheets(path)
# 2.0 INVESTIGATE DATA FOR EACH SHEET ----
sheets %>%
map(~ read_excel(path  = path, sheet = .)) %>%
set_names(sheets)
# 3.0 PERFORM VLOOKUP EQUIVALENT ----
data_joined_tbl <- sheets[4:7] %>%
map(~ read_excel(path = path, sheet = .)) %>%
reduce(left_join)
tbl_1 <- data_joined_tbl %>%
select(ID, AGE)
tbl_2 <- data_joined_tbl %>%
select(ID, EDUCATION)
tbl_1
tbl_2
tbl_1 %>%
left_join(tbl_2)
data_joined_tbl %>% glimpse()
recipe_obj <- recipe(~ ., data = data_joined_tbl) %>%
step_rm(ID) %>%
step_discretize(all_numeric(), options = list(min_unique = 1)) %>%
step_dummy(all_nominal(), one_hot = TRUE, naming = partial(dummy_names, sep = "__")) %>%
prep()
data_transformed_tbl <- data_joined_tbl %>%
bake(recipe_obj, new_data = .)
data_transformed_tbl %>% glimpse()
data_joined_tbl %>% glimpse()
recipe_obj <- recipe(~ ., data = data_joined_tbl) %>%
step_rm(ID) %>%
step_discretize(all_numeric(), options = list(min_unique = 1)) %>%
step_dummy(all_nominal(), one_hot = TRUE, naming = partial(dummy_names, sep = "__")) %>%
prep()
data_transformed_tbl <- data_joined_tbl %>%
bake(recipe_obj, new_data = .)
data_transformed_tbl %>% glimpse()
View(data_transformed_tbl)
# Prepare Correlations
correlation_tbl <- data_transformed_tbl %>%
cor(y = data_transformed_tbl$TERM_DEPOSIT__yes) %>%
as_tibble(rownames = "feature") %>%
rename(TERM_DEPOSIT__yes = V1) %>%
separate(feature, into = c("feature", "bin"), sep = "__") %>%
filter(!is.na(TERM_DEPOSIT__yes)) %>%
filter(!str_detect(feature, "TERM_DEP")) %>%
arrange(abs(TERM_DEPOSIT__yes) %>% desc()) %>%
mutate(feature = as_factor(feature) %>% fct_rev())
correlation_tbl <- data_transformed_tbl %>%
cor(y = data_transformed_tbl$TERM_DEPOSIT__yes)
View(correlation_tbl)
correlation_tbl <- data_transformed_tbl %>%
cor(y = data_transformed_tbl$TERM_DEPOSIT__yes) %>%
as_tibble(rownames = "feature") %>%
rename(TERM_DEPOSIT__yes = V1)
correlation_tbl <- data_transformed_tbl %>%
cor(y = data_transformed_tbl$TERM_DEPOSIT__yes) %>%
as_tibble(rownames = "feature") %>%
rename(TERM_DEPOSIT__yes = V1) %>%
separate(feature, into = c("feature", "bin"), sep = "__") %>%
filter(!is.na(TERM_DEPOSIT__yes)) %>%
filter(!str_detect(feature, "TERM_DEP")) %>%
arrange(abs(TERM_DEPOSIT__yes) %>% desc())
# Prepare Correlations
correlation_tbl <- data_transformed_tbl %>%
cor(y = data_transformed_tbl$TERM_DEPOSIT__yes) %>%
as_tibble(rownames = "feature") %>%
rename(TERM_DEPOSIT__yes = V1) %>%
separate(feature, into = c("feature", "bin"), sep = "__") %>%
filter(!is.na(TERM_DEPOSIT__yes)) %>%
filter(!str_detect(feature, "TERM_DEP")) %>%
arrange(abs(TERM_DEPOSIT__yes) %>% desc()) %>%
mutate(feature = as_factor(feature) %>% fct_rev())
